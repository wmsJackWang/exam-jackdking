(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-712919dd"],{"09f4":function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),Math.easeInOutQuad=function(e,t,o,n){return e/=n/2,e<1?o/2*e*e+t:(e--,-o/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function a(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(e,t,o){var r=l(),i=e-r,s=20,c=0;t="undefined"===typeof t?500:t;var d=function e(){c+=s;var l=Math.easeInOutQuad(c,r,i,t);a(l),c<t?n(e):o&&"function"===typeof o&&o()};d()}},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"218f":function(e,t,o){},"2b75":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-contain",staticStyle:{"margin-top":"10px"}},[o("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":e.subjectChange},model:{value:e.tabId,callback:function(t){e.tabId=t},expression:"tabId"}},e._l(e.subjectList,(function(t){return o("el-tab-pane",{key:t.id,staticStyle:{"margin-left":"20px"},attrs:{label:t.name,name:t.id}},[o("el-radio-group",{attrs:{size:"mini"},on:{change:e.knowledgeClassChange},model:{value:e.queryParam.queryRoot,callback:function(t){e.$set(e.queryParam,"queryRoot",t)},expression:"queryParam.queryRoot"}},e._l(e.knowledgeClassList,(function(t){return o("el-radio",{key:t.id,attrs:{size:"mini",label:t.id}},[e._v(e._s(t.value))])})),1),o("el-row",{staticStyle:{float:"right"}},[0==e.total?o("el-button",{attrs:{size:"small"},on:{click:function(t){return e.searchUpLevel()}}},[e._v("返回")]):e._e(),o("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small",disabled:e.requestLock},on:{click:function(t){return e.handleCreate()}}},[e._v("创建知识")]),o("el-radio-group",{attrs:{size:"mini"},on:{change:e.knowledgeTypeChange},model:{value:e.knowledgeType,callback:function(t){e.knowledgeType=t},expression:"knowledgeType"}},e._l(e.knowledgeTypeEnum,(function(t){return o("el-radio",{key:t.key,attrs:{size:"mini",label:t.key}},[e._v(e._s(t.value))])})),1)],1),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{prop:"id",label:"序号",width:"90px"}}),o("el-table-column",{attrs:{prop:"konwledgeType",label:"类型",width:"90px"}}),o("el-table-column",{attrs:{prop:"shortText",label:"简称",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{on:{click:function(o){return e.handleRead(t.row)}}},[e._v(e._s(t.row.shortText))])]}}],null,!0)}),o("el-table-column",{attrs:{prop:"content",label:"名称"}}),o("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"复习完一次该知识，增加复习分",placement:"top"}},[o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:function(o){return e.addReviewScore(t.row)}}},[e._v("复习分("+e._s(t.row.reviewScore)+")")])],1),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.searchUpLevel()}}},[e._v("上层")]),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:function(o){return e.searchDownLevel(t.row.id)}}},[e._v("下层")]),o("router-link",{staticStyle:{"margin-left":"10px"},attrs:{target:"_blank",to:{path:"/graph",query:{id:t.row.id}}}},[o("el-button",{attrs:{type:"text",size:"small"}},[e._v("查看图谱")])],1),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:function(o){return e.handleEdit(t.row)}}},[e._v("编辑")]),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"知识设置为已检测，已经做过这知识的题型",placement:"top"}},[o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:function(o){return e.searchUpLevel(t.row)}}},[e._v("检测状态("+e._s(1==t.row.isChecked?"已检测":"未检测")+")")])],1)]}}],null,!0)})],1),o("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],staticStyle:{"margin-top":"20px"},attrs:{total:e.total,background:!1,page:e.queryParam.pageIndex,limit:e.queryParam.pageSize},on:{"update:page":function(t){return e.$set(e.queryParam,"pageIndex",t)},"update:limit":function(t){return e.$set(e.queryParam,"pageSize",t)},pagination:e.search}})],1)})),1),o("el-dialog",{attrs:{visible:e.createDialogVisible},on:{"update:visible":function(t){e.createDialogVisible=t}}},[o("el-form",{ref:"createKnowledgeForm",attrs:{model:e.createKnowledgeForm,rules:e.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"科目："}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.createKnowledgeForm.subjectId,callback:function(t){e.$set(e.createKnowledgeForm,"subjectId",t)},expression:"createKnowledgeForm.subjectId"}},e._l(e.subjectList,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),o("el-form-item",{attrs:{label:"知识："}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.createKnowledgeForm.konwledgeType,callback:function(t){e.$set(e.createKnowledgeForm,"konwledgeType",t)},expression:"createKnowledgeForm.konwledgeType"}},e._l(e.knowledgeTypeEnum,(function(e){return o("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),o("el-form-item",{attrs:{label:"简略内容"}},[o("el-input",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"简略内容"},model:{value:e.createKnowledgeForm.shortText,callback:function(t){e.$set(e.createKnowledgeForm,"shortText",t)},expression:"createKnowledgeForm.shortText"}})],1),o("el-form-item",{attrs:{label:"全部内容"}},[o("quill-editor",{ref:"myQuillEditor",model:{value:e.createKnowledgeForm.content,callback:function(t){e.$set(e.createKnowledgeForm,"content",t)},expression:"createKnowledgeForm.content"}})],1),o("el-form-item",{attrs:{label:"知识画板"}},[o("a",{attrs:{href:"https://bittechblog.com/excalidraw/index.html",target:"_blank"}},[e._v("跳转到画板")])]),o("el-form-item",[o("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){return e.confirmCreate("createKnowledgeForm")}}},[e._v("确定")])],1)],1)],1),o("el-dialog",{attrs:{visible:e.editDialogVisible},on:{"update:visible":function(t){e.editDialogVisible=t}}},[o("el-form",{ref:"knowledgeForm",attrs:{model:e.knowledgeForm,rules:e.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"知识："}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.knowledgeForm.konwledgeType,callback:function(t){e.$set(e.knowledgeForm,"konwledgeType",t)},expression:"knowledgeForm.konwledgeType"}},e._l(e.knowledgeTypeEnum,(function(e){return o("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),o("el-form-item",{attrs:{label:"简略内容"}},[o("el-input",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"简略内容"},model:{value:e.knowledgeForm.shortText,callback:function(t){e.$set(e.knowledgeForm,"shortText",t)},expression:"knowledgeForm.shortText"}})],1),o("el-form-item",{attrs:{label:"全部内容"}},[o("quill-editor",{ref:"myQuillEditor",model:{value:e.knowledgeForm.content,callback:function(t){e.$set(e.knowledgeForm,"content",t)},expression:"knowledgeForm.content"}})],1),o("el-form-item",{attrs:{label:"知识画板"}},[o("a",{attrs:{href:"https://bittechblog.com/excalidraw/index.html",target:"_blank"}},[e._v("跳转到画板")])]),o("el-form-item",[o("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){return e.confirmUpdate("knowledgeForm")}}},[e._v("确定")])],1)],1)],1),o("el-dialog",{attrs:{visible:e.readDialogVisible},on:{"update:visible":function(t){e.readDialogVisible=t}}},[o("el-form",{ref:"knowledgeForm",attrs:{model:e.knowledgeForm,rules:e.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"知识："}},[o("el-select",{attrs:{placeholder:"请选择",disabled:!0},model:{value:e.knowledgeForm.konwledgeType,callback:function(t){e.$set(e.knowledgeForm,"konwledgeType",t)},expression:"knowledgeForm.konwledgeType"}},e._l(e.knowledgeTypeEnum,(function(e){return o("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),o("el-form-item",{attrs:{label:"简略内容"}},[o("el-input",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"简略内容",disabled:!0},model:{value:e.knowledgeForm.shortText,callback:function(t){e.$set(e.knowledgeForm,"shortText",t)},expression:"knowledgeForm.shortText"}})],1),o("el-form-item",{attrs:{label:"全部内容"}},[o("quill-editor",{ref:"myQuillEditor",model:{value:e.knowledgeForm.content,callback:function(t){e.$set(e.knowledgeForm,"content",t)},expression:"knowledgeForm.content"}})],1),o("el-form-item",{attrs:{label:"知识画板"}},[o("a",{attrs:{href:"https://bittechblog.com/excalidraw/index.html",target:"_blank"}},[e._v("跳转到画板")])])],1)],1)],1)},a=[],l=(o("a9e3"),o("d3b7"),o("ac1f"),o("25f0"),o("841c"),o("5530")),r=o("2f62"),i=o("333d"),s=o("57d8"),c=o("c418"),d=o("953d"),u=(o("a753"),o("8096"),o("14e1"),{components:{Pagination:i["a"],quillEditor:d["quillEditor"]},data:function(){return{pageKnowledgeStack:[],knowledgeClassList:[{id:1,value:"非根知识"},{id:2,value:"根知识"},{id:3,value:"所有"}],requestLock:!1,knowledgeForm:{id:void 0,konwledgeType:void 0,shortText:void 0,content:void 0,isChecked:void 0,reviewScore:void 0},editDialogVisible:!1,readDialogVisible:!1,createDialogVisible:!1,createKnowledgeForm:{id:void 0,konwledgeType:void 0,shortText:void 0,content:void 0,subjectId:void 0,parentKonwledgeId:void 0},knowledgeType:"A",queryParam:{queryRoot:1,parentKonwledgeId:void 0,konwledgeType:void 0,subjectId:0,pageIndex:1,pageSize:10},tabId:"",listLoading:!0,subjectList:[],tableData:[],total:0,rules:{}}},created:function(){this.queryParam.parentKonwledgeId=this.$route.query.id,console.log("parentKonwledgeId:"+this.queryParam.parentKonwledgeId),void 0!==this.queryParam.parentKonwledgeId&&(this.queryParam.konwledgeType=void 0),this.initSubject()},methods:{handleRead:function(e){var t=this;this.readDialogVisible=!0,console.log("row:"+JSON.stringify(e)),this.knowledgeForm=Object.assign({},e),console.log("knowledgeForm:"+JSON.stringify(this.knowledgeForm)),this.knowledgeForm.konwledgeType=e.konwledgeType,this.$nextTick((function(){t.$refs["knowledgeForm"].clearValidate()}))},handleEdit:function(e){var t=this;this.editDialogVisible=!0,console.log("row:"+JSON.stringify(e)),this.knowledgeForm=Object.assign({},e),console.log("knowledgeForm:"+JSON.stringify(this.knowledgeForm)),this.knowledgeForm.konwledgeType=e.konwledgeType,this.$nextTick((function(){t.$refs["knowledgeForm"].clearValidate()}))},handleCreate:function(){var e=this;this.createDialogVisible=!0,this.$nextTick((function(){e.$refs["createKnowledgeForm"].clearValidate()}))},searchDownLevel:function(e){var t={};t.parentKonwledgeId=this.queryParam.parentKonwledgeId,t.queryRoot=this.queryParam.queryRoot,t.knowledgeType=this.knowledgeType,this.pageKnowledgeStack.push(t),this.queryParam.parentKonwledgeId=e,this.queryParam.queryRoot=3,this.knowledgeType="A",this.queryParam.konwledgeType="A",this.search()},searchUpLevel:function(){if(this.queryParam.queryRoot=3,0===this.pageKnowledgeStack.length)this.queryParam.parentKonwledgeId=void 0,this.queryParam.konwledgeType="A",this.queryParam.queryRoot=3;else{var e=this.pageKnowledgeStack.pop();console.log("param:"+JSON.stringify(e)),this.queryParam.parentKonwledgeId=e.parentKonwledgeId,this.queryParam.konwledgeType=e.konwledgeType,this.konwledgeType=e.konwledgeType,this.queryParam.queryRoot=e.queryRoot}this.search()},initSubject:function(){var e=this;c["a"].list().then((function(t){e.subjectList=t.response,console.log("subjectList:"+JSON.stringify(e.subjectList));var o=e.subjectList[0].id;e.queryParam.subjectId=o,e.tabId=o.toString(),e.search()}))},search:function(){var e=this;"A"===this.knowledgeType?this.queryParam.konwledgeType=void 0:this.queryParam.konwledgeType=this.knowledgeType,this.listLoading=!0,console.log("this.queryParam:"+JSON.stringify(this.queryParam)),s["a"].pageList(this.queryParam).then((function(t){var o=t.response.page;e.tableData=o.list,console.log("data:"+JSON.stringify(t)),console.log("tableData:"+JSON.stringify(e.tableData)),e.total=o.total,e.queryParam.pageIndex=o.pageNum,e.listLoading=!1}))},knowledgeTypeChange:function(e){this.search()},knowledgeClassChange:function(e){this.search()},subjectChange:function(e,t){this.queryParam.subjectId=Number(this.tabId),this.search()},confirmUpdate:function(){var e=this;this.$refs["knowledgeForm"].validate((function(t){t&&s["a"].update(e.knowledgeForm).then((function(t){e.editDialogVisible=!1,e.$notify.success({title:"成功",message:"更新成功"}),e.search()})).catch((function(t){e.$notify.error({title:"更新失败",message:t.data.errmsg})}))}))},addReviewScore:function(e){var t=this;console.log("row:"+JSON.stringify(e)),this.knowledgeForm=Object.assign({},e),console.log("knowledgeForm:"+JSON.stringify(this.knowledgeForm)),this.knowledgeForm.konwledgeType=e.konwledgeType,this.knowledgeForm.reviewScore=this.knowledgeForm.reviewScore+1,s["a"].update(this.knowledgeForm).then((function(e){t.editDialogVisible=!1,t.$notify.success({title:"成功",message:"更新成功"}),t.search()})).catch((function(e){t.$notify.error({title:"更新失败",message:e.data.errmsg})}))},confirmCreate:function(){var e=this;this.requestLock=!0,this.createKnowledgeForm.parentKonwledgeId=this.queryParam.parentKonwledgeId,this.$refs["createKnowledgeForm"].validate((function(t){t&&s["a"].create(e.createKnowledgeForm).then((function(t){e.createDialogVisible=!1,e.$notify.success({title:"成功",message:"创建成功"}),e.search(),e.requestLock=!1})).catch((function(t){e.$notify.error({title:"创建失败",message:t.data.errmsg}),e.requestLock=!1}))}))}},computed:Object(l["a"])({},Object(r["e"])("enumItem",{knowledgeTypeEnum:function(e){return e.knowledge.knowledgeTypeEnum}}))}),g=u,m=o("2877"),p=Object(m["a"])(g,n,a,!1,null,null,null);t["default"]=p.exports},"333d":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[o("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},a=[],l=(o("a9e3"),o("09f4")),r={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[5,10,20,30,50]}},layout:{type:String,default:"prev, pager, next"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&Object(l["a"])(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&Object(l["a"])(0,800)}}},i=r,s=(o("42cd"),o("2877")),c=Object(s["a"])(i,n,a,!1,null,"88181ce8",null);t["a"]=c.exports},"42cd":function(e,t,o){"use strict";var n=o("218f"),a=o.n(n);a.a},"841c":function(e,t,o){"use strict";var n=o("d784"),a=o("825a"),l=o("1d80"),r=o("129f"),i=o("14c3");n("search",1,(function(e,t,o){return[function(t){var o=l(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,o):new RegExp(t)[e](String(o))},function(e){var n=o(t,e,this);if(n.done)return n.value;var l=a(e),s=String(this),c=l.lastIndex;r(c,0)||(l.lastIndex=0);var d=i(l,s);return r(l.lastIndex,c)||(l.lastIndex=c),null===d?-1:d.index}]}))}}]);