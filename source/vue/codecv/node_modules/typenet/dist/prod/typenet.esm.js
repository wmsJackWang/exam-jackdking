function t(t,e,n,o){return new(n||(n=Promise))((function(i,s){function r(t){try{a(o.next(t))}catch(t){s(t)}}function c(t){try{a(o.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((o=o.apply(t,e||[])).next())}))}function e(t){return document.createTextNode(t)}function n(t,e){const n=document.createElement("span");return n.textContent=t,n.style.cssText=e,n}const o="INSERT",i="REMOVE",s="MOVE";function r(t){const e=Array.from(t.childNodes),n=[];for(const t of e)(3===t.nodeType||1==t.nodeType&&"flicker"!=t.className)&&n.push(t);return n}function c(t,e,n,r){return new Promise((c=>{setTimeout((()=>{switch(r){case o:!function(t,e){const n=e.querySelector(".flicker");e.insertBefore(t,n)}(e,t);break;case i:t.removeChild(e);break;case s:!function(t,e){const n=e.querySelector(".flicker");e.insertBefore(n,t)}(e,t)}c(1)}),n)}))}const a={speed:100};class l{constructor(t,e=a){this.el=t,this.options=e,this.typeContainer=document.body,this.callbacks=[],this.cursorPosition=0,this.root=document.querySelector(t),this.root||console.error("please give the correct container.")}type(i,s){return this.callbacks.push((()=>t(this,void 0,void 0,(function*(){for(let t=0,r=i.length;t<r;t++){const r=(null==s?void 0:s.style)?n(i[t],null==s?void 0:s.style):e(i[t]),a=(null==s?void 0:s.speed)||this.options.speed;yield c(this.typeContainer,r,a,o),this.cursorPosition++}})))),this}remove(e=1,n){return this.callbacks.push((()=>t(this,void 0,void 0,(function*(){const t=r(this.typeContainer);let o=Math.min(e,this.cursorPosition);for(;o--;){const e=t[--this.cursorPosition],o=(null==n?void 0:n.speed)||this.options.speed;yield c(this.typeContainer,e,o,i)}})))),this}move(e=1,n){return this.callbacks.push((()=>t(this,void 0,void 0,(function*(){const t=r(this.typeContainer),o=e>0?"forward":"backward",i={forward:{actualCharactersLength:Math.min(e,t.length-this.cursorPosition),add:1},backward:{actualCharactersLength:Math.min(-e,this.cursorPosition),add:-1}};for(;i[o].actualCharactersLength--;){const e=t[this.cursorPosition+=i[o].add],r=(null==n?void 0:n.speed)||this.options.speed;yield c(this.typeContainer,e,r,s)}})))),this}sleep(e){return this.callbacks.push((()=>t(this,void 0,void 0,(function*(){return yield(t=e,new Promise((e=>setTimeout(e,t))));var t})))),this}line(){return this.callbacks.push((()=>t(this,void 0,void 0,(function*(){const t=document.createElement("br");this.typeContainer.insertBefore(t,this.typeContainer.childNodes[this.cursorPosition++])})))),this}start(){return t(this,void 0,void 0,(function*(){!function(t){var e;const n=t.typeContainer=document.createElement("div");n.className="type-container",n.style.cssText=t.options.style||"",null===(e=t.root)||void 0===e||e.appendChild(t.typeContainer)}(this),function(t){var e;const n=document.createElement("div");n.textContent="|",n.className="flicker",null===(e=t.typeContainer)||void 0===e||e.appendChild(n)}(this);for(const t of this.callbacks)yield t.apply(this)}))}}export{l as default,a as defaultTypeEffectOptions};
