function L(e){let r="";for(;M.test(e);){let n=e.indexOf("!["),t=e.slice(0,n);r+=t,e=e.slice(n+2);let i=e.indexOf("]("),s=e.slice(0,i);e=e.slice(i+2);let l=e.indexOf(")"),u=e.slice(0,l);e=e.slice(l+1),r+=`<img alt=${s} src=${u} />`}return r+e}function y(e){let r="";for(;H.test(e);){let n=e.indexOf("["),t=e.slice(0,n);r+=t,e=e.slice(n+1);let i=e.indexOf("]("),s=e.slice(0,i);e=e.slice(i+2);let l=e.indexOf(")"),u=e.slice(0,l);e=e.slice(l+1),r+=`<a href=${u} target="_blank">${s}</a>`}return r+e}function o(e,r=!1){let n=k(e);return n=w(n),n=T(n),n=x(n),n=L(n),n=y(n),n=E(n),r?n:`<p>${n}</p>`}function k(e){let r="",n=-1;for(;(n=e.indexOf("**"))!=-1;){r+=e.slice(0,n),e=e.slice(n+2);let t=e.indexOf("**");if(t==-1){e="**"+e;break}r+=`<strong>${e.slice(0,t)}</strong>`,e=e.slice(t+2)}return e&&(r+=e),r}function w(e){let r="",n=-1;for(;(n=e.indexOf("*"))!=-1;){r+=e.slice(0,n),e=e.slice(n+1);let t=e.indexOf("*");if(t==-1){e="*"+e;break}r+=`<i>${e.slice(0,t)}</i>`,e=e.slice(t+1)}return e&&(r+=e),r}function x(e){let r="",n=-1;for(;(n=e.indexOf("~~"))!=-1;){r+=e.slice(0,n),e=e.slice(n+2);let t=e.indexOf("~~");if(t==-1){e="~~"+e;break}r+=`<del>${e.slice(0,t)}</del>`,e=e.slice(t+2)}return e&&(r+=e),r}function T(e){let r="",n=-1;for(;(n=e.indexOf("`"))!=-1;){r+=e.slice(0,n),e=e.slice(n+1);let t=e.indexOf("`");if(t==-1){e="`"+e;break}r+=`<code class=single-code>${e.slice(0,t)}</code>`,e=e.slice(t+1)}return e&&(r+=e),r}function E(e){return e.replace(/icon:(\w+)(\s|\b)/g,(r,n)=>`<i class='iconfont icon-${n}'></i>`)}const v=/(#+)\s(.*)/g,C=/^\s*(\d+)\.\s(.+)/,H=/\[(.*)\]\((.*)\)/,M=/!\[(.*)\]\((.*)\)/;function N(e){/^\s+/.test(e[0])&&(e[0]=e[0].replace(/^(\s+)/g,r=>`
`)),e[0].startsWith(`
`)||(e[0]=`
`+e[0])}function d(e,r){let n=r?"<ol>":"<ul>";for(const t of e)n+=`<li>${o(t.content+m(t.children),!0)}</li>`;return n+=r?"</ol>":"</ul>",n}function m(e){let r="",n=0,t=e.length;if(t===0)return"";for(;n<t;){const i=[],s=[];for(;n<t&&e[n].type==="no_order";)s.push(e[n]),n++;for(r+=d(s,!1);n<t&&e[n].type==="order";)i.push(e[n]),n++;r+=d(i,!0)}return r.replace(/<ul><\/ul>/,"").replace(/<ol><\/ol>/,"")}function p(e){return C.test(e)}function I(e){let r=e.indexOf("- ");return r==0||r!=-1&&!e.slice(0,r).trim()}function _(e){return e.indexOf("#")!=-1}function q(e){return e.startsWith("```")}function B(e){return/^>/.test(e.trim())}function W(e){return e.trim()==="---"}function j(e){return e.trim()[0]==="|"}function z(e){return e.replace(/</g,"&lt;")}function b(e){return e.trim()==="::: start"||e.trim()===":::start"}function D(e){return e.trim()==="::: end"||e.trim()===":::end"}function F(e){return e.trim()===":::"}function $(e){return e.trim()==="::: headStart"||e.trim()===":::headStart"}function P(e){return e.trim()==="::: headEnd"||e.trim()===":::headEnd"}function R(e){return e.trim()==="::: mainStart"||e.trim()===":::mainStart"}function V(e){return e.trim()==="::: mainEnd"||e.trim()===":::mainEnd"}function A(e){return`<blockquote>${e.slice(1)}</blockquote>`}function G(e,r,n,t){let i="",s=e[r].slice(3).trim().toLowerCase();for(++r;r<n&&!e[r].startsWith("```");)i+=e[r]+`
`,r++;e[r]="";const l=t.highlight?`language-${s}`:"",u=t.lineNumber?"line-numbers":"",c=[l,u].join(" ");return i=`<pre><code ${c&&`class='${c}'`}>${i}</code></pre>`,{startIdx:r,result:i}}function J(e){return e.length!==3?e:e==="---"?"<hr/>":e}function h(e){return e.length>6?6:e.length}function K(e){return e.trim().replace(v,(r,n,t)=>`<h${h(n)}>${o(t,!0)}</h${h(n)}>`)}function Q(e,r,n){let t="<table>";for(t+=U(e[r]),t+="<tbody >",++r;r<n&&e[r].trim()[0]==="|";r++)t+=X(e[r]);return t+="</tbody></table>",t=t.replace(/<tr><\/tr>/,""),{startIdx:r-1,result:t}}function U(e){let r=-1,n="<thead><tr>";for(let t=0,i=e.length;t<i;t++)e[t]=="|"&&a(e,t-1)&&a(e,t+1)&&(r!=-1&&(n+=`<th>${o(e.slice(r+1,t))}</th>`),r=t);return n+"</tr></thead>"}function X(e){let r=-1,n="<tr>";for(let t=0,i=e.length;t<i;t++)if(e[t]=="|"&&a(e,t-1)&&a(e,t+1)){if(r!=-1){let s=e.slice(r+1,t);if(s.trim()[0]==="-")continue;n+=`<td>${o(s)}</td>`}r=t}return n+"</tr>"}function a(e,r){return e[r]===" "||e[r]==null}function O(e,r,n,t){let i="<div class=head-layout>",s="";for(++r;r<n&&!P(e[r]);)e[r].trim()&&(s+=e[r]+`
`),r++;return i+=f(s,{...t,xss:!1})+"</div>",{result:i,startIdx:r}}function S(e,r,n,t){let i="<div class=flex-layout>",s="";for(++r;r<n&&!D(e[r]);){if(b(e[r])){const{result:l,startIdx:u}=S(e,r,n,t);s+=l,r=u}else if($(e[r])){const{result:l,startIdx:u}=O(e,r,n,t);s+=l,r=u}else F(e[r])?(i+=`<div class=flex-layout-item>${f(s,{...t,xss:!1})}</div>`,s=""):s+=e[r].trim()?`
`+e[r]+`
`:"";r++}return i+=`<div class=flex-layout-item>${f(s,{...t,xss:!1})}</div>`,i+="</div>",{result:i,startIdx:r}}function Y(e,r,n,t){let i="<div class=main-layout>",s="";for(++r;r<n&&!V(e[r]);)e[r].trim()&&(s+=e[r]+`
`),r++;return i+=f(s,{...t,xss:!1})+"</div>",{result:i,startIdx:r}}function Z(e,r,n){let t="";for(;r<n;r++)if(!!e[r].trim())if(p(e[r])||I(e[r]))t+=e[r]+`
`;else break;return t=ee(t),{startIdx:r,result:t}}function ee(e){const r=e.match(/(\s)*(-|\d+\.)\s(.+)/g);if(!r)return e;N(r);const n=re(r);return m(n)}function re(e){const r=e,n=[],t=[];return r.forEach(i=>{if(i.trim()==="")return;const s=i.length-i.trimLeft().length,l=i.trim();for(;t.length&&s<=t[t.length-1].indent;)t.pop();let u=null;/^-\s/.test(l)?u={type:"no_order",content:l.slice(2),children:[]}:/^(\d+\.)\s/.test(l)&&(u={type:"order",content:l.slice(RegExp.$1.length),children:[]}),u&&(t.length?t[t.length-1].item.children.push(u):n.push(u),t.push({indent:s,item:u}))}),n}const g={lineNumber:!1,highlight:!1,xss:!0};function f(e,r){let n=r||g,t="";n=Object.assign({...g},n);let i=n.xss?z(e).split(`
`):e.split(`
`),s=(i==null?void 0:i.length)||0;for(let l=0;l<s;){if(_(i[l]))t+=K(i[l]);else if($(i[l])){const{result:u,startIdx:c}=O(i,l,s,n);l=c,t+=u}else if(R(i[l])){const{result:u,startIdx:c}=Y(i,l,s,n);l=c,t+=u}else if(b(i[l])){const{result:u,startIdx:c}=S(i,l,s,n);l=c,t+=u}else if(W(i[l]))t+=J(i[l]),++l;else if(j(i[l])){const{result:u,startIdx:c}=Q(i,l,s);l=c,t+=u}else if(I(i[l])||p(i[l])){const{result:u,startIdx:c}=Z(i,l,s);l=c-1,t+=u}else if(q(i[l])){const{result:u,startIdx:c}=G(i,l,s,n);l=c,t+=u}else B(i[l].trim())?t+=A(i[l].trim()):(i[l]=i[l].trim())&&(t+=o(i[l]));l++}return t}export{f as m};
