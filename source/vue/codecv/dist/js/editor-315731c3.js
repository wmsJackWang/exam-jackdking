import{d as V}from"./pinia-1bb501b6.js";import{g as y,r as J,s as R,b as Y,C as z,c as Q}from"./index-651c7436.js";import{g as X,b as Z,c as tt,i as et,q as ot,d as nt,t as F,e as at}from"./config-a41b7350.js";import{q as d,c as A,r as rt,a as x,b as st}from"./index-c7bb1d4b.js";import{r as m,ax as N,J as it,b as lt,n as ct}from"./@vue-3ea1986a.js";const h=y,b=R,D="custom-css-style",q="custom-markdown-primary-color",H="custom_markdown_primary_bg_color",B="markdown-font",k="ADJUST_RESUME_MARGIN_TOP",K="auto-one-page",ut="white-space",dt="Line_Height",E=1123;m();const mt=m(90),ft=m(1);function At(t){mt.value=t}function O(){return document.querySelector(".reference-dom")}function Nt(t){async function e(n){const r=n.target.files[0],s=new FileReader;s.readAsDataURL(r),s.onload=function(a){var o;t("upload-avatar",(o=a.target)==null?void 0:o.result)}}return{setAvatar:e}}function bt(t){const e=m(!1),n=D+"-"+t,r=m(h(n)?h(n):"");function s(){e.value=!e.value}function a(){var l;e.value=!1;let i=d(n);const u=r.value.trim(),g=i;!r.value||(i||(i=A(),i.setAttribute(n,"true")),i.textContent=u,!g&&((l=document.head)==null||l.appendChild(i)),b(n,u))}function o(){e.value=!1,rt(n),J(n),r.value=""}return N(()=>!d(n)&&setTimeout(a,50)),{cssDialog:e,cssText:r,toggleDialog:s,setStyle:a,removeStyle:o}}function wt(t){const e=H+"-"+t,n=X(t),r=m(h(e)?h(e):n);function s(a){a||(r.value=n,a=n);let o=d(e);const i=o;o||(o=A(),o.setAttribute(e,"true")),o.textContent=`:root { --markdown-primary-bg-color: ${a}; }`,!i&&document.head.appendChild(o),b(e,a)}return N(()=>!d(e)&&s(r.value)),{primaryColor:r,setPrimaryColor:s}}function Mt(t){const e=q+"-"+t,n=Z(t),r=m(h(e)?h(e):n);function s(a){a||(r.value=n,a=n);let o=d(e);const i=o;o||(o=A(),o.setAttribute(e,"true")),o.textContent=`:root { --markdown-primary-color: ${a} }`,!i&&document.head.appendChild(o),b(e,a)}return N(()=>!d(e)&&s(r.value)),{color:r,setColor:s}}function Rt(t){const e=B+"-"+t,n=[{value:"Noto Serif SC",label:"Noto Serif SC"},{value:"Noto Sans SC",label:"Noto Sans SC"},{value:"Nunito",label:"Nunito(\u82F1\u6587)"}],r=m(h(e)?h(e):tt(t)||n[0].value);function s(a,o){let i=d(e);const u=i;i||(i=A(),i.setAttribute(e,"true")),i.textContent=`.jufe * { font-family: ${a}, 'Noto Sans SC', 'Noto Serif SC', 'Nunito', sans-serif, serif; }`,!u&&document.head.appendChild(i),b(e,a);const g=O();_(g),!o&&U(g)}return N(()=>s(r.value,!0)),{fontOptions:n,font:r,setFont:s}}function _t(t){localStorage.removeItem(`${D}-${t}`),localStorage.removeItem(`${q}-${t}`),localStorage.removeItem(`${H}-${t}`),localStorage.removeItem(`${B}-${t}`),localStorage.removeItem(`${K}-${t}`),localStorage.removeItem(`${k}-${t}`),localStorage.removeItem(`${dt}-${t}`),localStorage.removeItem(`markdown-content-${t}`),location.reload()}function Et(t){const e=m(!1),n=it([]),r=k+"-"+t;function s(l){const c=[],p=new Set,C=new Set;function f(S){if(S!==l){const v=window.getComputedStyle(S),j=parseInt(v.marginTop),G=parseInt(v.marginBottom),w=S.tagName.toLowerCase(),M=S.className.split(" ")[0]||"",W=st(M||w);(!p.has(w)||!C.has(M))&&(c.push({tagName:w,name:W,marginBottom:G,marginTop:j,className:M}),p.add(w),C.add(M))}const P=S.children;for(let v=0;v<P.length;v++)f(P[v])}return f(l),c}function a(){u();const l=O(),c=s(l);n.length=0,n.push(...c)}function o(){u();let l=d(r),c="";const p=l;l||(l=A(),l.setAttribute(r,"true"));for(const f of n){const S=f.className?`.${f.className}`:f.tagName;c+=`.jufe ${S} {margin-top: ${f.marginTop}px!important; margin-bottom: ${f.marginBottom}px!important;}`}l.textContent=c,i(p,l),b(r,c);const C=O();_(C),U(C)}function i(l,c){if(!l){const p=d(K+"-"+t),C=d(D+"-"+t);if(p||C){const f=p||C;document.head.insertBefore(c,f)}else document.head.appendChild(c)}}function u(){e.value=!e.value}function g(){const l=h(r)||"";if(!l)return;let c=d(r);const p=c;c||(c=A(),c.setAttribute(r,"true")),c.textContent=l,i(p,c)}return N(()=>!d(r)&&g()),{adjustMargin:a,visible:e,confirmAdjustment:o,properties:n}}function It(){const t=m(!1);let e=null;function n(){if(!t.value)return null;const s=document.querySelector(".writable-edit-mode"),a=document.querySelector(".cm-scroller"),o=document.querySelector(".markdown-render");function i(){t.value&&(o.scrollTop=o.scrollHeight*(s.scrollTop/s.scrollHeight))}function u(){t.value&&(o.scrollTop=o.scrollHeight*(a.scrollTop/a.scrollHeight))}return a==null||a.addEventListener("scroll",u),s==null||s.addEventListener("scroll",i),()=>{s==null||s.removeEventListener("scroll",i),a==null||a.removeEventListener("scroll",u)}}function r(){e&&e(),e=n()}return lt(r),{followRoll:t,setFollowRoll:r}}function U(t){let e=0,n=0;const r=t.clientHeight,s=document.querySelector(".re-render");for(s.innerHTML="";r-n>0;){const a=x(),o=t.cloneNode(!0);a.classList.add("jufe-wrapper-page");const i=Math.min(r-n,E),u=x();u.classList.add("jufe-wrapper-page-item"),u.style.height=i+"px",o.style.position="absolute",o.style.top=-e*E+"px",o.style.left=0+"px",u.appendChild(o),a.appendChild(u),n+=E,e++,s==null||s.appendChild(a)}ft.value=e}function _(t){const e=Array.from(t.children);for(const n of e)n.getAttribute(ut)?t.removeChild(n):_(n)}const I="markdown-content",L="writable";et();const T=t=>{for(const e of F.value)if(t===e.type)return e.content;return""},$=t=>{for(const e of F.value)if(t===e.type)return e;return null};function pt(t,e){return m(),at({id:e})}const ht=V("editorStore",{state:()=>({title:"",MDContent:"",nativeContent:"",writable:Boolean(y(L))||!1,templateName:"",resumeType:"",id:null,name:""}),actions:{initMDContent(t,e){ot().then(n=>{var s,a;let r;if(n.code==200){r=JSON.parse(n.data);for(const[o,i]of r)nt(o,i)}if(e==0){const o=I+"-"+t;this.MDContent=y(o)?y(o):T(t),this.templateName=(s=$(t))==null?void 0:s.name,this.resumeType=t}else this.templateName=(a=$(t))==null?void 0:a.name,this.resumeType=t,pt(t,e).then(o=>{o.code===200&&(R(z,o.data),this.MDContent=o.data.content,this.id=o.data.id,this.name=o.data.name)})})},initMDContentByMyResumeId(t){var n;const e=I+"-"+t;this.MDContent=y(e)?y(e):T(t),this.templateName=(n=$(t))==null?void 0:n.name},setMDContent(t,e){this.MDContent=t,t&&R(`${I}-${e}`,t)},setWritableMode(t){this.writable=!this.writable,R(L,this.writable),Q("\u60A8\u5DF2\u5207\u6362\u81F3",this.writable?"\u5185\u5BB9\u6A21\u5F0F":"Markdown\u6A21\u5F0F"),this.writable&&ct(()=>{t=t||document.querySelector(".reference-dom"),t=t.cloneNode(!0);const e=document.querySelector(".writable-edit-mode");_(t),e&&(e.innerHTML=t.innerHTML)})},setNativeContent(t){this.nativeContent=t},resetNativeContent(){this.nativeContent=""}}}),$t=()=>ht(Y);export{k as A,q as C,dt as L,B as M,H as a,K as b,D as c,bt as d,_ as e,Mt as f,Rt as g,wt as h,Et as i,It as j,mt as k,At as l,Nt as m,ft as p,_t as r,U as s,$t as u};
